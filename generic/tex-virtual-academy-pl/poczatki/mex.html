<HTML>
<HEAD>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
<TITLE>MeX, pdfMeX</TITLE>
</HEAD>

<BODY>

<!-- May 2008. Staszek Wawrykiewicz (StaW at gust.org.pl).
TeX Live 2008 revision. Public domain. -->

<center>
<h2>MeX i pdfMeX</h2>
</center>
MeX jest adaptacj± formatu Plain TeX do sk³adu w&nbsp;jêzyku polskim
z&nbsp;uwzglêdnieniem polskich zwyczajów drukarskich.<br>
Autorzy: Bogus³aw Jackowski i&nbsp;Marek Ryæko.<br>
Dokumentacja poni¿sza omawia pokrótce tworzenie formatu <code>mex.fmt</code>
(lub <code>pdfmex.fmt</code>, dla wersji TeX-a tworz±cej 
od razu pliki PDF)
i&nbsp;jego u¿ycie w&nbsp;instalacji zgodnej z&nbsp;<code>Web2c</code> 
(dystrybucje teTeX, TeX Live) a&nbsp;tak¿e MiKTeX.
Szczegó³owe informacje nt. pakietu MeX zawarto w&nbsp;pliku
<code>mexinfo.pol</code>.

<p>
W dystrybucji do³±czono ponadto prosty plik przyk³adowy 
<code>doc/polish/mex/base/tstmex.tex</code>, s³u¿±cy do przetestowania
poprawnego dzia³ania formatu MeX. Pocz±tkuj±cym u¿ytkownikom zaleca siê 
zapoznanie z&nbsp;zawarto¶ci± tego pliku.
Plik ten dostêpny jest tak¿e na serwerze 
<a href="ftp://ftp.gust.org.pl/pub/GUST/contrib/zaczynam/">GUST</a>.

<hr>

<h3>I. Przygotowanie formatu MeX/pdfMeX (polskiej implementacji formatu Plain)</h3>

Format w systemie TeX to wstêpnie prekompilowany (aby przyspieszyæ jego
analizê przez program <code>tex/pdftex</code>) zestaw makrodefinicji oraz regu³
przenoszenia wyrazów dla wybranego zestawu jêzyków. Plik formatu z regu³y
posiada rozszerzenie <code>.fmt</code>.<p>

Przygotowanie formatu MeX (lub pdfMeX do tworzenia
plików PDF) polega w&nbsp;skrócie na uruchomieniu: 
<pre>
<em>tex-engine</em> --ini mex.ini
</pre>

gdzie <em>tex-engine</em> oznacza program <code>tex</code> lub 
<code>pdftex</code>. Obecnie, od Web2c wer. 7.5.5, u¿ywamy jednego programu: 
<code>pdftex</code>, za¶ ,,sposób'' generowania formatu (dla tworzenia 
plików DVI lub PDF) zale¿ny jest od zawarto¶ci pliku <code>.ini</code>.
Zatem format do tworzenia plików PDF generujemy obecnie poleceniem: 
<code>pdftex --ini pdfmex.ini</code>. 
Podczas przetwarzania wczytywane s± pliki makr formatu MeX, a&nbsp;tak¿e
<code>plain.tex</code> oraz wzorce przenoszenia wyrazów dla jêzyka polskiego
i&nbsp;angloamerykañskiego.

<p>
Poniewa¿ wygenerowany plik powinien znale¼æ siê w&nbsp;odpowiednim
miejscu struktury katalogów, a&nbsp;tak¿e powinien zostaæ ,,zarejestrowany''
w&nbsp;instalacji, wspó³czesne dystrybucje u³atwiaj± proces generowania. 

<ul>
<li>W&nbsp;dystrybucjach 
opartych na Web2c (teTeX, TeX Live) formaty generowane s± przy pomocy
programu <code>fmtutil</code> (<code>fmtutil --help</code> wy¶wietla dostêpne
opcje) za¶ deklaracje formatów znajduj± siê w&nbsp;pliku 
<code>texmf/web2c/fmtutil.cnf</code> (gdy posiadamy drzewo katalogów
zawieraj±ce lokalne pliki konfiguracyjne instalacji systemu TeX, program
<code>fmtutil</code> korzysta z&nbsp;lokalnej kopii <code>fmtutil.cnf</code>;
dok³adne po³o¿enie pliku wy¶wietli uruchomienie polecenia:
<code>kpsewhich fmtutil.cnf</code>).<br> 
W&nbsp;systemach Unix/Linux ca³y proces generowania formatu dostêpny jest
z&nbsp;menu <code>Formats</code> programu <code>texconfig</code>, które
pozwala modyfikowaæ plik <code>fmtutil.cnf</code>,
co polega na usuniêciu znaku #
przed deklacj± wybranego formatu b±d¼ zablokowaniu takim znakiem
formatów niepo¿±danych. Po zapisaniu pliku i&nbsp;zakoñczeniu edycji,
format zostanie automatyczne wygenerowany.<br>
W&nbsp;systemach Windows
nale¿y samodzielnie zmodyfikowaæ plik <code>fmtutil.cnf</code>, po czym
uruchomiæ polecenie <code>fmtutil --byfmt=mex</code>
(lub <code>fmtutil --byfmt=pdfmex</code>).

<li> 
W MiKTeX (od wersji 2.0)
nale¿y uruchomiæ w&nbsp;menu <code>MiKTeX Options</code> podmenu
<code>TeX Formats</code>, zaznaczyæ format
<code>MeX</code> (<code>pdfMeX</code>) i&nbsp;utworzyæ (przyciskiem
<code>Build</code>) potrzebny plik formatu.
</ul>

<p>
W&nbsp;obu omawianych przypadkach tworzony jest plik formatu
<code>mex.fmt</code> (lub <code>pdfmex.fmt</code>), który jest
umieszczany w&nbsp;katalogu w³a¶ciwym dla tego rodzaju
plików, oraz tworzony jest program <code>mex</code> lub <code>pdfmex</code>
(uruchamia on program <code>pdftex</code>
z&nbsp;formatem <code>mex</code> b±d¼ 
z&nbsp;formatem <code>pdfmex</code>).</p>

<hr>

<h3>II. U¿ycie</h3>

Aktualne implementacje, oparte na Web2c, a&nbsp;tak¿e MiKTeX pozwalaj±
na prawid³owe przekodowanie znaków diakrytycznych w&nbsp;pliku TeX-owym
na wewnêtrzn± reprezentacjê, stosowan± przez programy. 
W&nbsp;Polsce, niestety, 
stosowane s± ró¿ne ,,standardy'' kodowania diakrytyków w&nbsp;tworzonych przez
u¿ytkownika plikach, zale¿nie od systemu operacyjnego. Dla potrzeb systemu 
TeX u¿ywamy zewnêtrznych, tekstowych plików TCX, pozwalaj±cych ,,obs³u¿yæ'' 
ró¿ne spotykane ,,standardy''. Dziêki temu przekodowanie dzia³a te¿ 
w&nbsp;drug± stronê, kiedy TeX wy¶wietla komunikaty i&nbsp;zapisuje pliki 
<code>.log</code>, a&nbsp;tak¿e pliki ze spisem tre¶ci, skorowidzem itp.<p>

Uruchomienie polecenia:<br>
<code>mex --translate-file=TCXFILE myfile.tex</code><br>
oznacza uruchomienia TeX-a z&nbsp;formatem <code>mex.fmt</code> 
i&nbsp;z&nbsp;odpowiedni± tablic± przekodowañ (ich lista znajduje siê 
poni¿ej). Polecenie <code>mex</code> tworzone jest zwykle jako dowi±zanie
do programu (obecnie) <code>pdftex</code> w&nbsp;katalogu zawieraj±cym binaria.<p>

Przekodowanie (plik TCX) mo¿e byæ deklarowane bezpo¶rednio w&nbsp;pliku
TeX-owym. 
<!-- Pocz±wszy od wersji Web2c&nbsp;7.4, wymaga to podania 
w&nbsp;wierszu poleceñ opcji <code>--parse</code> lub w³±czenia jej na 
sta³e, co wymaga zmiany w&nbsp;g³ównym pliku
konfiguracyjnym <code>texmf.cnf</code>:<br>
<code>parse_first_line = t</code><br>
(t -- od `true', zamiast domy¶lnego przypisania f -- od `false'). -->
Przyk³adowo, je¶li <b>pierwszy</b> wiersz pliku zawiera
 komentarz strukturalny postaci<br>
     <code>%&mex --translate-file=il2-pl</code><br>
 to plik mo¿e byæ przetworzony za pomoc± polecenia <code>pdftex plik.tex</code>;
 zostanie wtedy wczytany format <code>mex.fmt</code> oraz tablica
 <code>il2-pl.tcx</code>
 przekodowania z&nbsp;uk³adu iso8859-2 do uk³adu fontów PL (wewnêtrznego
 dla programu TeX).<p>

 W&nbsp;dystrybucjach dostarczono szereg plikow TCX. Mo¿na je znale¼æ
 w&nbsp;katalogu <code>texmf/web2c/</code>:
 
<p>
<table border>
<tr>
 <td>  amiga-pl.tcx </td> <td> AmigaPL do PL </td>
</tr>
<tr>
   <td>il2-pl.tcx</td>    <td> iso8859-2 (latin2) do PL </td>
</tr>
<tr>
   <td>cp1250pl.tcx</td> <td> Windows cp1250 do PL </td>
</tr>
<tr>
   <td>cp852-pl.tcx</td>  <td> IBM cp852 do PL </td>
</tr>
<tr>
   <td>macce-pl.tcx</td>  <td> Apple MacCE do PL  </td>
</tr>
<tr>
   <td>maz-pl.tcx</td>    <td> Mazovia do PL  </td>
</tr>
</table>

<hr>

<h3> III. Polskie fonty PostScriptowe</h3>

Aktualne dystrybucje zawieraj± fonty w&nbsp;wersji 
Type&nbsp;1 (postscriptowe) serii PL
(spolonizowane standardowe dla TeX-a fonty CM), a&nbsp;tak¿e znacznie 
rozszerzone i&nbsp;obecnie zalecane fonty Latin Modern.
 Mo¿na je tak¿e znale¼æ w&nbsp;najbli¿szym wê¼le CTAN lub jego kopii,
 np.:<br>
 <a href="ftp://ftp.gust.org.pl/pub/CTAN/language/polish/plpsfont/">
ftp://ftp.gust.org.pl/pub/CTAN/language/polish/plpsfont/</a>.<br>
 <a href="ftp://ftp.gust.org.pl/pub/CTAN/fonts/lm/">
ftp://ftp.gust.org.pl/pub/CTAN/fonts/lm/</a>.<p>

Przedstawimy tu przyk³ad dotycz±cy instalacji fontów PL.
 Pliki <code>.pfb</code> powinny znale¼æ siê w&nbsp;podkatalogu
 <code>texmf/fonts/type1/public/pl/</code> naszej instalacji, pliki 
 map fontowych (<code>.map</code>) w&nbsp;katalogu
 <code>texmf/fonts/map/dvips/pl/</code> za¶ wektory kodowañ 
(<code>.enc</code>) -- w&nbsp;katalogu <code>texmf/fonts/enc/dvips/pl/</code>
<p>
W dystrybucjach opartych na Web2c zautomatyzowano, poprzez u¿ycie programu
<code>updmap</code>, proces tworzenia map fontowych dla programów
<code>dvips</code>, <code>pdftex</code> 
i&nbsp;<code>dvipdfmx</code>. Poni¿ej omówiono wiêc tylko, czego ten proces
dotyczy.
<p>
 Sterownik <code>dvips</code> (zamieniaj±cy wynik pracy TeX-a, plik DVI,
 do formatu PostScript) wymaga aby deklaracje map fontowych 
 (dla fontów PL konkretnie zawarto¶æ <code>texmf/fonts/map/dvips/pl/pl.map</code>) 
 by³y do³±czone do pliku <code>texmf/fonts/map/dvips/updmap/psfonts.map</code>.
 Mapy fontowe mo¿na alternatywnie do³±czyæ w&nbsp;pliku 
 <code>texmf/dvips/config/config.ps</code> (lub jego lokalnej kopii),
 dopisuj±c wiersz:<br>
 <code>p +pl.map</code><br>
 po deklaracji g³ównej mapy fontowej: <code>p psfonts.map</code>. <p>

 Aby fonty Type&nbsp;1 by³y u¿yte przez program <code>pdfTeX</code>, 
 nale¿y sprawdziæ jakie mapy fontowe s± deklarowane w&nbsp;pliku 
 <code>texmf/fonts/map/pdftex/updmap/pdftex.map</code> -- powinien on tak¿e
 zawieraæ deklaracje map fontowych dla fontów PL.<p>

W&nbsp;dystrybucjach wszystkie aktualnie dostêpne polskie fonty
Type1 s± gotowe do u¿ycia zarówno przez program <code>dvips</code>,
<code>pdftex</code>, jak i&nbsp;<code>dvipdfmx</code> .<p>

Bardziej szczegó³owe omówienie instalacji fontów Type1 zawarte
jest w&nbsp;artykule <a href="../fonty/fonts_inst.html">Instalowanie
fontów Type1/True Type</a>. <p>

<hr>

<i>Staszek Wawrykiewicz</i> (StaW at gust dot org dot pl), 30.05.2008.

</BODY>
</HTML>

