<html>
<head>
<title>System ConTeXt</title>
<LINK REL="stylesheet" TYPE="text/css" HREF="css/mycss.css">
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
</head>
<body bgcolor=#ff9060>

<!-- modyfikacje -- StaW (13.04.2000) -->

<h1>Instalacja systemu</h1>

<p>W katalogu <tt>.../macros/context</tt> serwerów CTAN znajd± Pañstwo 
nastêpuj±ce pliki:
<table border=0>
<tr valign="top"><td nowrap>
<tt>cont-doc.zip</tt>
	</td><td nowrap>--</td><td>
	        style dla dokumentacji plików ConTeXt 
			</td></tr>
<tr valign="top"><td nowrap>
<tt>cont-fnt.zip</tt>
	</td><td nowrap>--</td><td>
	dodatkowe fonty -- to samo jest w <tt>cont-tmf.zip</tt> (za wyj±tkiem 
	plików <tt>.pfm</tt> i <tt>.afm</tt>) -- pobraæ jedynie pliki
	 <tt>.afm</tt> i <tt>.pfm</tt> je¶li s± potrzebne
			</td></tr>
<tr valign="top"><td nowrap>
<tt>cont-lat.zip</tt>
	</td><td nowrap>--</td><td>
	<tt>PPCHTeX</tt> -- zbiory specyficzne dla <tt>LaTeX-a</tt> (sk³ad wzorów chemicznych)
			</td></tr>
<tr valign="top"><td nowrap>
<tt>cont-mod.zip</tt>
	</td><td nowrap>--</td><td>
	modu³y dodatkowe -- nie instalowaæ (starocie z poprzednich wersji)
			</td></tr>
<tr valign="top"><td nowrap>
<tt>cont-mps.zip</tt>
	</td><td nowrap>--</td><td>
	zbiory dla <tt>METAPOST-a</tt> -- wygl±da na starocie; to samo jest w <tt>cont-tmf.zip</tt>
			</td></tr>
<tr valign="top"><td nowrap>
<tt>cont-ppc.zip</tt>
	</td><td nowrap>--</td><td>
	<tt>PPCHTeX</tt> -- zbiory dla <tt>PPCHTeX-a</tt> (sk³ad wzorów chemicznych)
			</td></tr>
<tr valign="top"><td nowrap>
<tt>cont-tex.zip</tt>
	</td><td nowrap>--</td><td>
	starocie, wygl±da, ¿e jest to zbiór dla starszych wersji.
			</td></tr>
<tr valign="top"><td nowrap>
!<tt>cont-tmf.zip</tt>
	</td><td nowrap>--</td><td>
	    <b>g³ówne archiwum</b> zawieraj±ce system i dokumentacjê
			</td></tr>
<tr valign="top"><td nowrap>
!<tt>cont-uti.zip</tt>
	</td><td nowrap>--</td><td>
	  skrypt perlowy (to samo co w <tt>cont-wrk.zip</tt>)
			</td></tr>
<tr valign="top"><td nowrap>
!<tt>cont-wrk.zip</tt>
	</td><td nowrap>--</td><td>
	skrypty perlowe, pliki konfiguracyjne
			</td></tr>
</table><br/>

<p>Poniewa¿ pakiet czêsto jest zmieniany, informacje powy¿sze mog± byæ nieaktualne w&nbsp;chwili czytania.

<p>Instalacja jest nieco k³opotliwa, polega na ,,rêcznym'' rozpakowaniu
plików <tt>.zip</tt> i przekopiowaniu zawarto¶ci utworzonych katalogów
do odpowiednich katalogów drzewa katalogów zawieraj±cych instalacjê
(za wyj±tkiem plików <tt>.afm</tt> i <tt>.pfm</tt> -- które
nie s± niezbêdne przy przetwarzaniu <tt>TeX-em</tt> -- mo¿na przenie¶æ
ca³e, nowoutworzone, drzewo katalogów w odpowiednie miejsce)
<tt>TeX-a</tt>.</p>

<p>Niestety w archiwach panuje ba³agan w katalogach
spowodowany tym, ¿e serwery mirroruj±ce pobieraj± jedynie pliki; nie kasuj±c
starych i zbêdnych.</p>

<p>Dla jasno¶ci poni¿ej przedstawiam katalogi w drzewie <tt>TDS</tt>, gdzie
znajduj± siê pliki <tt>ConTeXt-a</tt>.
<pre>
...\context
...\context\data
...\context\perltk
...\doc\context
...\doc\context\base
...\dvips\context
...\fonts\tfm\hoekwater\context
...\fonts\type1\hoekwater\context
...\fonts\afm\hoekwater\context
...\fonts\pfm\hoekwater\context
...\metapost\context
...\tex\context
...\tex\context\config\
</pre></p>

<p>Po wgraniu plików w odpowiednie miejsce nale¿y uaktualniæ bazê danych.
(sposób wykonania tej czynno¶ci zale¿y od implementacji; np. w przypadku
<tt>MikTeXa</tt> nale¿y uruchomiæ program <tt> initexmf -u</tt>).</p>

<h4>Generowanie formatu</h4>

<p>Pierwsz± czynno¶ci± jest zmiana nazwy pliku 
<tt>texexec.rme</tt> na <tt>texexec.ini</tt> w katalogu 
<tt>.../context/config</tt> i edycja jego zawarto¶ci
<pre>
.
.
%set  TeXShell  to  tetex 
%set TeXShell  to  fptex 
set TeXShell  to  miktex
%set TeXShell  to  private 
.
.
</pre><br/>
polegaj±ca na wyborze implementacji (nale¿y usun±æ znak <tt>%</tt>
w  odpowiedniej linii, wstawiaj±c go w pozosta³ych; powy¿ej widaæ, ¿e wybrano 
<tt>MikTeX-a</tt></p>

<p>Proces generowania jest sterowany za pomoc± skryptu perlowego (oczywi¶cie 
interpretowanego programem Perl) i odbywa siê nieco inaczej w ró¿nych
implementacjach. Najpro¶ciej maj± u¿ytkownicy <tt>Unixa</tt> -- generowanie
polega na uruchomieniu skryptu <tt>texexec</tt> z odpowiednimi opcjami
(mo¿emy za³o¿yæ, ¿e interpreter <tt>PERL</tt> jest zainstalowany).</p>

<p>W przypadku systemu <tt>Windows</tt> proces mo¿e byæ bardziej skomplikowany
ze wzglêdu na konieczno¶æ samodzielnej instalacji <tt>PERL-a</tt> --
zak³adam, ¿e perl jest zainstalwany (mo¿na go pobraæ z archiwum CPAN, np:
<a href="ftp://ftp.icm.edu.pl/pub/CPAN/">perl</a>).</p>

<p>Po rozpakowaniu archiwum, w katalogu <tt>.../context/perltk</tt> powinien
znale¼æ siê plik <tt>runperl.zip</tt> -- nale¿y go rozpakowaæ, a nastêpnie
zmieniæ nazwê pliku <tt>runperl.exe</tt> (zwykle w archiwach perla te¿
jest taki plik i je¿eli program interpretera 
nazywa siê inaczej &gt;&gt;np. <tt>winperl</tt>&lt;&lt; nale¿y pobraæ plik
z dystrybucji perla) na <tt>texexec.exe</tt>.
Sztuczka polega na tym, ¿e program ten ³aduje do pamiêci program <tt>PERL</tt>
wskazuj±c mu do wykonania skrypt o nazwie takiej jak on sam (³atwo siê
domy¶leæ, ¿e w tym wypadku skrypt nazywa siê <tt>texexec.pl</tt>),
przekazuj±c oczywi¶cie podane opcje.</p>

<p>Po wykonaniu powy¿szych czynno¶ci pomocniczych proces generowania
formatu przebiega ju¿ podobnie we wszystkich implementacjach i 
w najprostszym wariancie polega na wywo³aniu:<br/>
<tt>texexec --make en</tt><br/>
w wyniku czego powstanie plik <tt>cont-en.fmt</tt> (jak ³atwo siê
domy¶leæ <tt>en</tt> okre¶la format dla jêzyka angielskiego; 
mo¿na podaæ kilka 
symbolicznych nazw jêzyków -- zostan± dla nich utworzone formaty).</p>

<p>Dla ka¿dego kodu jêzyka mo¿e byæ utworzony odpowiedni zbiór; konwencja nazw
jest nastêpuj±ca: <tt>cont-*.tex</tt>, gdzie zamiast <tt>*</tt> nale¿y wstawiæ
odpowiedni symbol jêzyka (czyli dla jêzyka polskiego zbiór bêdzie nosi³
nazwê <tt>cont-pl.tex</tt>).</p>

<p>Je¿eli brak zbioru dla naszego jêzyka mo¿emy u¿yæ innego, w którym
zadeklarowano u¿ycie naszego lub wzoruj±c siê na innych zbiorach utworzyæ w³asny.</p>

<p>Wed³ug dokumentacji wywo³uj±c program <tt>texexec</tt> mo¿na podaæ inne opcje np:<br/> 
<tt>texexec --make --language=pl,uk --bodyfont=plr en</tt><br/>
które powinny sterowaæ procesem generowania formatu. Dok³adna analiza (dla systemu
MS Windows) wykaza³a, ¿e postaæ wywo³ania (opcje i ich warto¶ci) jest przetwarzana
na jêzyk <tt>ConTeXt-a</tt> i zapisywana do zbioru <tt>cont-fmt.tex</tt> (po zakoñczeniu
generowania nazwa jest zmieniana na <tt>cont-fmt.log</tt> -- jego zawarto¶æ mo¿e byæ
pomocna w tworzeniu w³asnego pliku), który
<b>jest</b> interpretowany w procesie tworzenia formatu. W wyniku dzia³ania
programu <tt>texexec</tt> otrzymamy format o nazwie <tt>cont-en.fmt</tt> zawieraj±cy
miêdzy innymi regu³y przenoszenia wyrazów w jêzyku polskim i angielskim i mo¿liwo¶æ
wprowadzania polskich diakrytyków w notacji prefixowej (znak prefixu <tt>/</tt>).</p>

<p>
Maj±c w³asny plik z definicj± jêzyka mo¿emy wygenerowaæ format:<br/>
<tt>texexec --make pl</tt><br/>
</p>

<p>Utworzony format (zbiór <tt>.fmt</tt>) nale¿y umie¶ciæ w odpowiednim katalogu
(mo¿na go pozostawiæ w miejscu generacji, ale nale¿y pamiêtaæ o modyfikacji
odpowiednich zbiorów konfiguruj±cych instalacjê <tt>TeX-a</tt>; <tt>PDFTeX</tt> musi
wiedzieæ, gdzie szukaæ formatu).</p>

Nieco wiêcej uwag na temat polonizacji ConTeXt-a i&nbsp;jego u¿ycia
mo¿na znale¼æ w&nbsp;notatce 
<a href="../poczatki/cont-pl.html">ConTeXt i&nbsp;jêzyk polski</a>

</body>
</html>

