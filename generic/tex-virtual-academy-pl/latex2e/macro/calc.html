<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
<title> Zastaw ciekawych makroinstrukcji </title>
<LINK REL="stylesheet" TYPE="text/css" HREF="mycss.css">
<meta http-equiv="Content-language" content="pl">
<meta name="Author" content="W³odzimierz Macewicz">
<meta name="Keywords" content="tex, latex, makroinstrukcje, pakiety makroinstrukcji, Wirtualna Akademia">
</head>
<body bgcolor=#a0f0a0>
<h2><a name=calc>calc</a></h2>

Pakiet zawiera makroinstrukcje rozszerzaj±ce zakres dzia³añ
na rejestrach. Mamy do dyspozycji nastêpuj±ce polecenia:<br>

<table border=1>
<tr><th>
Polecenie </th><th> opis</th></tr>
<tr><td>
<code>\newcounter{<i>rejestr</i>&nbsp;}</code> </td><td> definicja nowego
rejestru; jest on inicjowany warto¶ci± 0</td></tr>
<tr><td>
<code>\newcounter{<i>rejestr</i>&nbsp;}[<i>inny&nbsp;rejestr</i>&nbsp;]</code> </td><td>
					definicja nowego rejestru;
					jest on inicjowany warto¶ci± 0
					i staje siê zale¿ny od rejestru
					<i>inny rejestr</i>. Wykonanie
					polecenia
		<code>\stepcounter{<i>inny&nbsp;rejestr</i>&nbsp;}</code> lub
		<code>\refstepcounter{<i>inny&nbsp;rejestr</i>&nbsp;}</code>
					powoduje
				wyzerowanie rejestru <i>rejestr</i>&nbsp;</td></tr>
<tr><td>
<code>\setcounter{<i>rejestr</i>&nbsp;}{<i>warto¶æ</i>&nbsp;}</code> </td><td> ustawienie warto¶ci
					rejestru</td></tr>
<tr><td>
<code>\addtocounter{<i>rejestr</i>&nbsp;}{<i>warto¶æ</i>&nbsp;}</code> </td><td>
			dodanie do rejestru <i>rejestr</i>&nbsp; warto¶ci</td></tr>
<tr><td>
<code>\stepcounter{<i>rejestr</i>&nbsp;}</code> </td><td> incrementacja rejestru
					<i>rejestr</i>&nbsp;</td></tr>
<tr><td>
<code>\refstepcounter{<i>rejestr</i>&nbsp;}</code> </td><td> incrementacja rejestru
			<i>rejestr</i>;
		    je¿eli oznaczymy etykiet± miejsce (<code>label</code>), to
			warto¶ci± polecenia <code>\ref</code>  bêdzie aktualna
			warto¶æ rejestru</td></tr>
</table>

Napis reprezentuj±cy warto¶æ rejestru mo¿emy uzyskaæ wywo³uj±c
polecenie<br>
<code>\the</code><i>rejestr</i><br>
(zamiast okre¶lenia <i>rejestr</i>&nbsp;
nale¿y u¿yæ nazwy w³a¶ciwego rejestru).

Definiuj±c warto¶æ rejestru (parametr <i>warto¶æ</i>&nbsp;) mo¿emy u¿ywaæ liczb
ca³kowitych, warto¶ci innych rejestrów (mo¿liwych do uzyskania
poleceniem <code>\value{<i>rejestr</i>&nbsp;}</code>, lub <code>\the<i>rejestr</i>&nbsp;</code>)
oraz operatorów <code>-</code>, <code>+</code>, <code>*</code>, <code>/</code>. Dzia³ania wykonywane
s± w kolejno¶ci zgodnej z przyjêtymi zwyczajami. Mo¿emy u¿ywaæ
notacji nawiasowej (<code>()</code>) do wymuszenia kolejno¶ci wykonania dzia³añ.

<p>
<b>Przyk³ad</b>
<pre>
\newcounter{x}
\newcounter{y}
\setcounter{x}{2}
\setcounter{y}{3}
\setcounter{y}{(\value{x} + 5) * \value{y}}

Warto¶ci± rejestru y jest \they.
</pre>

Powy¿sza sekwencja daje nastêpuj±cy efekt:<br clear=all>
<img src=calc1.gif>


<p>Oprócz dzia³añ na liczbach mamy mo¿liwo¶æ dokonywania dzia³añ
na d³ugo¶ciach. D³ugo¶æ mo¿e byæ podawana w jednostkach przyjêtych
w TeX-u:<br>

<table border=1>
<tr><th>
Polecenie </th><th> opis</th></tr>
<tr><td>
sp </td><td> jednostka w której TeX prowadzi obliczenia
					(65536&nbsp;sp = 1&nbsp;pt) </td></tr>
<tr><td>
pt </td><td> punkt typograficzny (1/72.27&nbsp;in = 0.351&nbsp;mm </td></tr>
<tr><td>
bp </td><td> du¿y punkt (72&nbsp;bp = 1&nbsp;in); u¿ywany w postscripcie) </td></tr>
<tr><td>
dd </td><td> didot (1/72 cala francuskiego, = 0.376&nbsp;mm) </td></tr>
<tr><td>
mm </td><td> milimetr (= 1.845&nbsp;pt) </td></tr>
<tr><td>
pc </td><td> pica (=12&nbsp;pt = 4.218&nbsp;mm) </td></tr>
<tr><td>
cc </td><td> cicero (= 12&nbsp;dd = 4.531&nbsp;mm) </td></tr>
<tr><td>
cm </td><td> centymetr (=10&nbsp;mm = 2.371&nbsp;pc) </td></tr>
<tr><td>
in </td><td> cal (= 2.54&nbsp;mm = 72.27&nbsp;pt = 6.022&nbsp;pc) </td></tr>
<tr><td>
ex </td><td> miara wzglêdna; wynika z wysoko¶ci litery <code>x</code> w
			aktualnie u¿ywanym foncie) </td></tr>
<tr><td>
em </td><td> miara wzglêdna; wynika z szeroko¶ci litery <code>m</code> w
			aktualnie u¿ywanym foncie) </td></tr>
<tr><td>
mu </td><td> jednostka u¿ywana we wzorach matematycznych
						(18&nbsp;mu = 1&nbsp;em) </td></tr>
</table>

<table border=1>
<tr><th>
Polecenie </th><th> opis</th></tr>
<tr><td>
<code>\newlength{\<i>nazwa</i>&nbsp;}</code> </td><td> definicja nowego rejestru
						d³ugo¶ci</td></tr>
<tr><td>
<code>\setlength{\<i>nazwa</i>&nbsp;}{<i>d³ugo¶æ</i>&nbsp;}</code> </td><td> ustawienie warto¶ci</td></tr>
<tr><td>
<code>\addtolength{\<i>nazwa</i>&nbsp;}{<i>d³ugo¶æ</i>&nbsp;}</code> </td><td> dodanie
				do aktualnej warto¶ci rejestru</td></tr>
<tr><td>
<code>\settowidth{\<i>nazwa</i>&nbsp;}{<i>tekst</i>&nbsp;}</code> </td><td> ustawienie
				warto¶ci rejestru <i>nazwa</i>&nbsp; na
				warto¶æ równ± naturalnej szeroko¶ci
				tekstu <i>tekst</i>&nbsp;</td></tr>
<tr><td>
<code>\settoheight{\<i>nazwa</i>&nbsp;}{<i>tekst</i>&nbsp;}</code> </td><td> ustawienie
				warto¶ci rejestru <i>nazwa</i>&nbsp; na
				warto¶æ równ± naturalnej wysoko¶ci
				tekstu <i>tekst</i>&nbsp;</td></tr>
</table>

<p>Parametr <i>d³ugo¶æ</i>&nbsp; mo¿e byæ zdefiniowany za pomoc±
wyra¿enia arytmetycznego. Proszê pamiêtaæ o sensie fizycznym wykonywanych
operacji (maj± sens nastêpuj±ce operacje:<br>
d³ugo¶æ = d³ugo¶æ + d³ugo¶æ, <br>
d³ugo¶æ = d³ugo¶æ * liczba, <br>
liczba = <code>\ratio{d³ugo¶æ}{d³ugo¶æ}</code>,<br>
d³ugo¶æ = d³ugo¶æ / liczba). <br>
Operatorem
dzielenia d³ugo¶ci przez d³ugo¶æ jest makroinstrukcja<br>
<code>\ratio{<i>d³ugo¶æ</i>&nbsp;}{<i>d³ugo¶æ</i>&nbsp;}</code><br>
a warto¶æ rzeczywist± mo¿emy uzyskaæ u¿ywaj±c makroinstrukcji<br>
<code>\real{<i>liczba rzeczywista</i>&nbsp;}</code><br>
której parametrem jest tekst bêd±cy liczb± rzeczywist± (zapis
z kropk± dziesiêtn±).
Do dzielenia d³ugo¶ci przez liczbê mo¿emy u¿ywaæ znaku <code>/</code>.
Nale¿y pamiêtaæ ¿e definicja wyra¿enia powinna zaczynaæ siê od
elementu bêd±cego d³ugo¶ci±, a w wyniku kolejnych obliczeñ warto¶ciami
po¶rednimi musz± byæ d³ugo¶ci. Napis reprezentuj±cy warto¶æ rejestru
mo¿emy uzyskaæ  poleceniem
<code>\the\<i>rejestr</i>&nbsp;</code><sup><a href=#fnc1>1</a></sup>

<p>
<b>Przyklad:</b><br>
<pre>
\newlength{\x}
\newlength{\y}
\setlength{\y}{5cm}
\settowidth{\x}{ala ma kota}
\setlength{\y}{3cm * \ratio{\y}{\x}}
Rejestr y ma warto¶æ: \the\y
</pre>
Powy¿sza sekwencja daje nastêpuj±cy efekt:<br clear=all>

<img src=calc2.gif>

<p>Pakiet jest dostêpny pod adresem:<br>
<a href=ftp://ftp.gust.org.pl/TeX/macros/latex/requiredtools/calc.dtx>
ftp://ftp.gust.org.pl/TeX/macros/latex/contrib/required/tools/calc.dtx</a><p>

<hr align=left width=20%>
<sup><a name=fnc1>1</a></sup>
Proszê zwróciæ uwagê ¿e parametr okre¶laj±cy nazwê rejestru d³ugo¶ci
zaczyna siê znakiem <code>\</code>

<hr>

<a href=../../texologia.html><img src="../../gify/lew-7vs.gif" hspace=10 border=0 align=left></a>
<a href=mailto:W.Macewicz@ia.pw.edu.pl><img src="../../gify/mail.gif" hspace=10 align=left></a>
<a href=http://www.ia.pw.edu.pl/~wujek/index.html>W³odzimierz Macewicz</a><br clear=all>
<hr>
<!--#config timefmt="%y-%m-%d" -->
Ostatnie zmiany: 12.09.2004.
</body>
</html>
